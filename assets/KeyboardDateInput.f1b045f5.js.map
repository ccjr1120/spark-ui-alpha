{"version":3,"file":"KeyboardDateInput.f1b045f5.js","sources":["../../../packages/components/Base/Date/components/ClockPicker/useClockCalc.ts","../../../packages/components/Base/Date/components/ClockPicker/Clock.tsx","../../../packages/components/Base/Date/hooks/useViews.ts","../../../packages/components/Base/Date/components/ClockPicker/ClockNumber.tsx","../../../packages/components/Base/Date/components/ClockPicker/ClockNumbers.tsx","../../../packages/components/Base/Date/components/ClockPicker/index.tsx","../../../packages/components/Base/Date/components/CalendarPicker/PickersCalendarHeader.tsx","../../../packages/components/Base/Date/components/CalendarPicker/index.tsx","../../../packages/components/Base/Date/components/DigitalClockPicker/ScrollNumber/NumberItem.tsx","../../../packages/components/Base/Date/components/DigitalClockPicker/ScrollNumber/index.tsx","../../../packages/components/Base/Date/components/DigitalClockPicker/DigitalClock.tsx","../../../packages/components/Base/Date/components/DigitalClockPicker/index.tsx","../../../packages/components/Base/Date/components/CalendarOrClockPicker/index.tsx","../../../packages/components/Base/Date/components/KeyboardDateInput.tsx"],"sourcesContent":["const CLOCK_WIDTH = 220;\nconst CLOCK_HOUR_WIDTH = 36;\nconst rad2deg = (rad) => rad * (180 / Math.PI);\n\nconst useCalcClock = () => {\n  const clockWidth = CLOCK_WIDTH;\n  const clockHourWidth = CLOCK_HOUR_WIDTH;\n  const innerScale = 0.65;\n  const clockCenter = {\n    x: clockWidth / 2,\n    y: clockWidth / 2,\n  };\n  // 12点钟方向\n  const baseClockPoint = {\n    x: clockCenter.x,\n    y: 0,\n  };\n  const cx = baseClockPoint.x - clockCenter.x;\n  const cy = baseClockPoint.y - clockCenter.y;\n  const getAngleValue = (step, offsetX, offsetY) => {\n    const x = offsetX - clockCenter.x;\n    const y = offsetY - clockCenter.y;\n    const atan = Math.atan2(cx, cy) - Math.atan2(x, y);\n    let deg = rad2deg(atan);\n    deg = Math.round(deg / step) * step;\n    deg %= 360;\n    const value = Math.floor(deg / step) || 0;\n    const delta = x ** 2 + y ** 2;\n    const distance = Math.sqrt(delta);\n    return { value, distance };\n  };\n\n  const getMinutes = (offsetX, offsetY, step = 1) => {\n    const angleStep = step * 6;\n    let { value } = getAngleValue(angleStep, offsetX, offsetY);\n    value = (value * step) % 60;\n    return value;\n  };\n\n  const getHours = (offsetX, offsetY, ampm = false) => {\n    const { value, distance } = getAngleValue(30, offsetX, offsetY);\n    let hour = value || 12;\n\n    if (!ampm) {\n      if (distance < clockWidth / 2 - clockHourWidth) {\n        hour += 12;\n        hour %= 24;\n      }\n    } else {\n      hour %= 12;\n    }\n\n    return hour;\n  };\n\n  return {\n    clockWidth,\n    clockHourWidth,\n    getHours,\n    getMinutes,\n    innerScale,\n  };\n};\n\nexport default useCalcClock;\n","import { isNaN } from 'lodash';\nimport { useNamespace } from '@spark-ui/hooks';\nimport useClockCalc from './useClockCalc';\nimport { ClockProps } from './interface';\nimport React, { Children, cloneElement } from 'react';\n\n// 获取指针旋转角度\nconst getRotateAngel = (view, value) =>\n  view === 'hour' ? value * 30 : value * 6;\n// 获取当前是第几个子节点\nconst getNthChildNumber = (view, value) => {\n  if (isNaN(value)) {\n    return -1;\n  }\n  return view === 'hour' ? value + 1 : value / 5;\n};\n// 获取指针指向位置的中心点颜色\nconst getInnerPointColor = (view, value) =>\n  view !== 'hour' && value % 5 !== 0 ? 'white' : 'var(--spark-clock-pointer-color)';\n\nfunction Clock(props: ClockProps) {\n  const { type, value, children, onChange } = props;\n  const ns = useNamespace('clock');\n  const { clockWidth, clockHourWidth, getHours, getMinutes, innerScale } =\n    useClockCalc();\n  const setTime = (event, state) => {\n    const { offsetX, offsetY } = event;\n    const newSelectedValue =\n      type === 'hour'\n        ? getHours(offsetX, offsetY, false)\n        : getMinutes(offsetX, offsetY);\n    onChange(newSelectedValue, state);\n  };\n  const handleMouseMove = (event) => {\n    // event.buttons > 0 = 有鼠标按钮被按下\n    if (event.buttons > 0) {\n      setTime(event.nativeEvent, 'shallow');\n    }\n  };\n  const handleMouseUp = (event) => {\n    setTime(event.nativeEvent, 'finish');\n  };\n  const isInner = type === 'hour' && (value === 0 || value > 12);\n  return (\n    <div\n      className={ns.m('wrap')}\n      style={{ width: `${clockWidth}px`, height: `${clockWidth}px` }}\n    >\n      <div\n        aria-label=\"clock-square-mask\"\n        className={ns.e('quare-mask')}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n      />\n      <div\n        aria-label=\"pointer\"\n        className={ns.e('pointer')}\n        style={{\n          opacity: !isNaN(value) ? 1 : 0,\n          height: `${((clockWidth - clockHourWidth - 2) / 2) * (isInner ? innerScale : 1)\n            }px`,\n          transform: `rotateZ(${getRotateAngel(type, value)}deg)`,\n        }}\n      >\n        <div\n          className={ns.e('pointer-center')}\n          style={{\n            top: `${-clockHourWidth / 2}px`,\n            left: `calc(50% - ${clockHourWidth / 2}px)`,\n            border: `${clockHourWidth / 2 - 2}px solid var(--spark-clock-pointer-color)`,\n            background: getInnerPointColor(type, value),\n          }}\n        />\n      </div>\n      <div\n        // css={css`\n        //   width: 100%;\n        //   > span:nth-of-type(${getNthChildNumber(type, value)}) {\n        //     color: ${getColor('white')};\n        //   }\n        // `}\n        style={{ width: '100%' }}\n      >\n        {Children.toArray(children).map((item, i) => cloneElement(item, 1))}\n      </div>\n    </div>\n  );\n}\n\nexport default Clock;\n","import { useCallback, useEffect, useState } from 'react';\n\ninterface ArgsType {\n  view: string | undefined;\n  views: Array<string>;\n  onViewChange?: Function;\n  onChange: Function;\n}\n\nexport default ({ view, views, onViewChange, onChange }: ArgsType) => {\n  const [openView, setOpenView] = useState(view || views[0]);\n  useEffect(() => {\n    if (view) {\n      setOpenView(view);\n    }\n  }, [view]);\n  const previousView = views[views.indexOf(openView) - 1] ?? null;\n  const nextView = views[views.indexOf(openView) + 1] ?? null;\n  const changeView = useCallback(\n    (newView) => {\n      setOpenView(newView);\n      if (onViewChange) {\n        onViewChange(newView);\n      }\n    },\n    [onViewChange]\n  );\n  const openNext = useCallback(() => {\n    if (nextView) {\n      changeView(nextView);\n    }\n  }, [nextView, changeView]);\n  const handleChangeAndOpenNext = useCallback(\n    (date, viewSelectionState?) => {\n      const isCurViewFinish = viewSelectionState === 'finish';\n      const globalSelectionState =\n        isCurViewFinish && nextView ? 'partial' : viewSelectionState;\n      onChange(date, globalSelectionState);\n      if (isCurViewFinish) {\n        openNext();\n      }\n    },\n    [nextView, openNext, onChange]\n  );\n  return {\n    openView,\n    setOpenView: changeView,\n    openNext,\n    nextView,\n    previousView,\n    handleChangeAndOpenNext,\n  };\n};\n","import { useNamespace } from '@spark-ui/hooks';\nimport { ClockNumberProps } from './interface';\nimport useClockCalc from './useClockCalc';\n\nfunction ClockNumber(props: ClockNumberProps) {\n  const { index, inner, label } = props;\n  const ns = useNamespace('clock-number');\n  const { clockWidth, clockHourWidth, innerScale } = useClockCalc();\n  const angle = ((index % 12) / 12) * Math.PI * 2 - Math.PI / 2;\n  const length =\n    ((clockWidth - clockHourWidth - 2) / 2) * (inner ? innerScale : 1);\n  const x = Math.round(Math.cos(angle) * length);\n  const y = Math.round(Math.sin(angle) * length);\n  return (\n    <span\n      className={`${ns.b()} ${ns.useIs('inner', inner)}`}\n      style={{\n        left: `calc((100% - ${clockHourWidth}px) / 2)`,\n        width: `${clockHourWidth}px`,\n        height: `${clockHourWidth}px`,\n        transform: `translate(\n          ${x}px,\n          ${y + (clockWidth - clockHourWidth) / 2}px\n        )`,\n      }}\n    >\n      {label}\n    </span>\n  );\n}\n\nexport default ClockNumber;\n","import ClockNumber from './ClockNumber';\n\nexport const getMinuteNumbers = () => {\n  const minuteNumbers = [];\n  const first = 1;\n  const end = 12;\n  const getClockLabel = (step) => {\n    if (step === 12) {\n      return '00';\n    }\n    if (`${step * 5}`.length === 1) {\n      return `0${step * 5}`;\n    }\n    return `${step * 5}`;\n  };\n  for (let step = first; step <= end; step += 1) {\n    minuteNumbers.push(\n      <ClockNumber key={step} index={step} label={getClockLabel(step)} />\n    );\n  }\n  return minuteNumbers;\n};\n\nexport const getHourNumbers = () => {\n  const hourNumbers = [];\n  const startHour = 0;\n  const endHour = 23;\n  for (let hour = startHour; hour <= endHour; hour += 1) {\n    let label = hour.toString();\n    if (hour === 0) {\n      label = '00';\n    }\n    hourNumbers.push(\n      <ClockNumber\n        key={hour}\n        index={hour}\n        label={label}\n        inner={hour === 0 || hour > 12}\n      />\n    );\n  }\n  return hourNumbers;\n};\n","import { useMemo } from 'react';\nimport { useNamespace } from '@spark-ui/hooks';\nimport Clock from './Clock';\nimport PickersArrowSwitcher from '../PickersArrowSwitcher';\nimport useViews from '../../hooks/useViews';\nimport { getHourNumbers, getMinuteNumbers } from './ClockNumbers';\nimport { ClockPickerProps } from './interface';\nimport './index.less';\n\nfunction ClockPicker(props: ClockPickerProps) {\n  const {\n    date,\n    view,\n    views = ['hour', 'minute'],\n    onChange,\n    onViewChange,\n  } = props;\n  const ns = useNamespace('clock-picker');\n  const {\n    openView,\n    setOpenView,\n    previousView,\n    nextView,\n    handleChangeAndOpenNext,\n  } = useViews({\n    view,\n    views,\n    onChange,\n    onViewChange,\n  });\n  const viewProps = useMemo(() => {\n    switch (openView) {\n      case 'hour': {\n        const handleHourChange = (value, isFinish) => {\n          handleChangeAndOpenNext(date.hour(value), isFinish);\n        };\n        return {\n          onChange: handleHourChange,\n          value: date.hour(),\n          children: getHourNumbers(),\n        };\n      }\n      case 'minute': {\n        const handleMinuteChange = (value, isFinish) => {\n          handleChangeAndOpenNext(date.minute(value), isFinish);\n        };\n        return {\n          onChange: handleMinuteChange,\n          value: date.minute(),\n          children: getMinuteNumbers(),\n        };\n      }\n      default:\n        throw new Error('not supported view');\n    }\n  }, [openView, date, handleChangeAndOpenNext]);\n  return (\n    <div className={ns.b()}>\n      <div className={ns.e('label')}>\n        {{ hour: '小时', minute: '分钟', second: '秒' }[openView]}\n      </div>\n      <PickersArrowSwitcher\n        className={ns.e('arrow')}\n        isLeftDisabled={!previousView}\n        isRightDisabled={!nextView}\n        onLeftClick={() => setOpenView(previousView)}\n        onRightClick={() => setOpenView(nextView)}\n      />\n      <Clock type={openView} {...viewProps} />\n    </div>\n  );\n}\n\nexport default ClockPicker;\n","import { useNamespace } from '@spark-ui/hooks';\nimport PickersArrowSwitcher from '../PickersArrowSwitcher';\nimport { PickersCalendarHeaderProps } from './interface';\n\nconst chsMonth = [\n  '一月',\n  '二月',\n  '三月',\n  '四月',\n  '五月',\n  '六月',\n  '七月',\n  '八月',\n  '九月',\n  '十月',\n  '十一月',\n  '十二月',\n];\nfunction PickersCalendarHeader(props: PickersCalendarHeaderProps) {\n  const { date, openView, views, onViewChange, onMonthChange } = props;\n  const ns = useNamespace('pickers-calendar-header');\n  return (\n    <div className={ns.b()}>\n      <div className={ns.m('wrapper')}>\n        <div className={ns.e('text')}>\n          <span>{chsMonth[date.month()] || ''}</span>\n          <span>{date.year() || ''}</span>\n        </div>\n        <div\n          className={`${ns.e('icon')} ${ns.useIs('year', openView === 'year')}`}\n          onClick={() => onViewChange(openView === 'year' ? 'day' : 'year')}\n        >\n          {'<'}\n        </div>\n      </div>\n      <PickersArrowSwitcher\n        onLeftClick={() => onMonthChange(-1)}\n        onRightClick={() => onMonthChange(1)}\n      />\n    </div>\n  );\n}\n\nexport default PickersCalendarHeader;\n","import { useNamespace } from '@spark-ui/hooks';\nimport PickersCalendarHeader from './PickersCalendarHeader';\nimport useViews from '../../hooks/useViews';\nimport DayPicker from './DayPicker';\nimport YearPicker from './YearPicker';\nimport { CalendarPickerProps } from './interface';\nimport './index.less';\n\nfunction CalendarPicker(props: CalendarPickerProps) {\n  const { date, view, views, onChange, onViewChange } = props;\n  const ns = useNamespace('calendar-picker');\n  const { openView, setOpenView, handleChangeAndOpenNext } = useViews({\n    view,\n    views,\n    onChange,\n    onViewChange,\n  });\n  const handleChangeMonth = (opVal) => {\n    handleChangeAndOpenNext(date.add(opVal, 'month'));\n  };\n  const handleChangeYear = (newDate) => {\n    handleChangeAndOpenNext(newDate, 'finish');\n  };\n  const handleChangeDay = (newDate) => {\n    handleChangeAndOpenNext(newDate, 'finish');\n  };\n  return (\n    <div className={ns.m('root')}>\n      <PickersCalendarHeader\n        openView={openView}\n        views={views}\n        onViewChange={setOpenView}\n        date={date}\n        onMonthChange={handleChangeMonth}\n      />\n      <div className={ns.e('content')}>\n        {openView === 'year' && (\n          <YearPicker date={date} onChange={handleChangeYear} />\n        )}\n        {openView === 'day' && (\n          <DayPicker date={date} onChange={handleChangeDay} />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default CalendarPicker;\n","import { useNamespace } from '@spark-ui/hooks';\nimport { ScrollNumberItemProps } from './interface';\n\nfunction NumberItem(props: ScrollNumberItemProps) {\n  const { height, active, children } = props;\n  const ns = useNamespace('scroll-number-item');\n  return (\n    <li\n      className={ns.b()}\n      // css={css`\n      //   width: 100%;\n      //   text-align: center;\n      //   height: ${height}px;\n      //   line-height: ${height}px;\n      //   color: ${getColor(active ? 'gray-black-3' : 'gray-black-9')};\n      //   ${active && 'font-weight: 700;'}\n      // `}\n    >\n      {children}\n    </li>\n  );\n}\nexport default NumberItem;\n","import { useNamespace } from '@spark-ui/hooks';\nimport { times } from 'lodash';\nimport { useRef, useState } from 'react';\nimport { ScrollNumberProps } from './interface';\nimport NumberItem from './NumberItem';\nimport './index.less';\n\nfunction ScrollNumber(props: ScrollNumberProps) {\n  const { start = 0, end = 23 } = props;\n  const ns = useNamespace('scroll-number');\n\n  const containerHeight = 256;\n  const itemHeight = 40;\n  const sideSpaceHeight = (containerHeight - itemHeight) / 2;\n  const numbers = times(end - start + 1, (i) => ({\n    number: start + i,\n    label: start + i < 10 ? `0${start + i}` : start + i,\n  }));\n  const scrollHeight = itemHeight * numbers.length;\n  const scrollContainerRef = useRef();\n  const [offsetTop, setOffsetTop] = useState(0);\n  const [activeNumber, setActiveNumber] = useState(0);\n  const handleScroll = (e) => {\n    // 根据滚动距离计算当前居中的数字\n    const { scrollTop } = e.target;\n    const number = Math.round(scrollTop / itemHeight);\n    setActiveNumber(() => number);\n    setOffsetTop(() => number * itemHeight);\n  };\n\n  return (\n    <div className={ns.m('wrapper')}>\n      <div\n        ref={scrollContainerRef}\n        className={ns.e('content')}\n        onScroll={handleScroll}\n      >\n        <div style={{ height: `${scrollHeight}px` }} />\n      </div>\n      <div className={ns.m('list--wrapper')}>\n        <ul\n          className={ns.m('list')}\n          // css={css`\n          //   width: 100%;\n          //   position: absolute;\n          //   top: ${-offsetTop}px;\n          //   &::before,\n          //   &::after {\n          //     content: '';\n          //     display: block;\n          //     height: ${sideSpaceHeight}px;\n          //   }\n          // `}\n          style={{ top: `${-offsetTop}px` }}\n        >\n          {numbers.map((item) => (\n            <NumberItem\n              key={item.label}\n              height={itemHeight}\n              active={item.number === activeNumber}\n            >\n              {item.label}\n            </NumberItem>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\nexport default ScrollNumber;\n","import ScrollNumber from './ScrollNumber';\nimport { DigitalClockProps } from './interface';\n\nfunction DigitalClock(props: DigitalClockProps) {\n  return (\n    <>\n      <ScrollNumber end={23} />\n      <ScrollNumber end={59} />\n      <ScrollNumber end={59} />\n    </>\n  );\n}\n\nexport default DigitalClock;\n","import { useNamespace } from '@spark-ui/hooks';\nimport DigitalClock from './DigitalClock';\nimport { DigitalClockPickerProps } from './interface';\nimport './index.less';\n\nfunction DigitalClockPicker(props: DigitalClockPickerProps) {\n  const ns = useNamespace('digital-clock-picker');\n  return (\n    <div className={ns.b()}>\n      <DigitalClock />\n    </div>\n  );\n}\n\nexport default DigitalClockPicker;\n","import { forwardRef, useMemo } from 'react';\nimport { useNamespace } from '@spark-ui/hooks';\nimport ClockPicker from '../ClockPicker';\nimport useViews from '../../hooks/useViews';\nimport CalendarPicker from '../CalendarPicker';\nimport DigitalClockPicker from '../DigitalClockPicker';\nimport CalendarOrClockPickerProps from './interface';\nimport './index.less';\n\nconst isDatePickerView = (openView) =>\n  openView === 'year' || openView === 'month' || openView === 'day';\nconst isTimePickerView = (openView) =>\n  openView === 'hour' || openView === 'minute';\n\n/**\n * @returns value {views[0]:v1, views[1]:v2, ...}\n */\nconst CalendarOrClockPicker = forwardRef(\n  (\n    props: CalendarOrClockPickerProps,\n    ref?: React.LegacyRef<HTMLDivElement>\n  ) => {\n    const { views, date, onChange, dial = 'clock' } = props;\n    const ns = useNamespace('calendar-or-clock-picker');\n    const { openView, setOpenView, handleChangeAndOpenNext } = useViews({\n      view: undefined,\n      views,\n      onChange,\n    });\n    const TimePicker = useMemo(\n      () => (dial === 'number' ? DigitalClockPicker : ClockPicker),\n      [dial]\n    );\n    return (\n      <div ref={ref} aria-label=\"picker-view-root\" className={ns.b()}>\n        {isTimePickerView(openView) && (\n          <TimePicker\n            date={date}\n            view={openView}\n            views={views.filter(isTimePickerView)}\n            onChange={handleChangeAndOpenNext}\n            onViewChange={setOpenView}\n          />\n        )}\n        {isDatePickerView(openView) && (\n          <CalendarPicker\n            date={date}\n            view={openView}\n            views={views.filter(isDatePickerView)}\n            onChange={handleChangeAndOpenNext}\n            onViewChange={setOpenView}\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nCalendarOrClockPicker.displayName = 'CalendarOrClockPicker';\n\nexport default CalendarOrClockPicker;\n","import { forwardRef, ReactNode } from 'react';\n\ninterface KeyboardDateInputProps {\n  togglePopper: Function;\n  renderInput: Function;\n  value: string;\n  inputType: string;\n}\n\nconst KeyboardDateInput = forwardRef((props: KeyboardDateInputProps, ref) => {\n  const {\n    togglePopper,\n    renderInput,\n    value,\n    inputType = 'date',\n    ...others\n  } = props;\n  const handleToggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    togglePopper();\n  };\n  return renderInput({\n    ref,\n    value,\n    togglePopper: handleToggle,\n    ...others,\n  });\n});\n\nKeyboardDateInput.displayName = 'KeyboardDateInput';\n\nexport default KeyboardDateInput;\n"],"names":["CLOCK_WIDTH","CLOCK_HOUR_WIDTH","rad2deg","rad","useCalcClock","clockWidth","clockHourWidth","innerScale","clockCenter","baseClockPoint","cx","cy","getAngleValue","step","offsetX","offsetY","x","y","atan","deg","value","delta","distance","ampm","hour","angleStep","getRotateAngel","view","getInnerPointColor","Clock","props","type","children","onChange","ns","useNamespace","getHours","getMinutes","useClockCalc","setTime","event","state","newSelectedValue","handleMouseMove","buttons","nativeEvent","handleMouseUp","isInner","m","width","height","_jsx","e","opacity","isNaN","transform","top","left","border","background","Children","toArray","map","item","i","cloneElement","useViews","views","onViewChange","openView","setOpenView","useState","useEffect","previousView","_a","nextView","_b","changeView","useCallback","newView","openNext","handleChangeAndOpenNext","date","viewSelectionState","isCurViewFinish","ClockNumber","index","inner","label","angle","Math","PI","length","round","cos","sin","b","useIs","getMinuteNumbers","minuteNumbers","getClockLabel","first","end","push","getHourNumbers","hourNumbers","startHour","endHour","toString","ClockPicker","viewProps","useMemo","isFinish","minute","Error","second","PickersArrowSwitcher","chsMonth","PickersCalendarHeader","onMonthChange","_jsxs","month","year","CalendarPicker","handleChangeMonth","opVal","add","handleChangeYear","newDate","handleChangeDay","YearPicker","DayPicker","NumberItem","active","ScrollNumber","start","itemHeight","numbers","times","number","scrollHeight","scrollContainerRef","useRef","offsetTop","setOffsetTop","activeNumber","setActiveNumber","handleScroll","scrollTop","target","DigitalClock","_Fragment","DigitalClockPicker","isDatePickerView","isTimePickerView","CalendarOrClockPicker","forwardRef","ref","dial","undefined","TimePicker","filter","displayName","KeyboardDateInput","togglePopper","renderInput","inputType","others","stopImmediatePropagation"],"mappings":"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"}