import{a as x,j as i,r as C,F as S}from"./jsx-runtime.308c77b6.js";import{a as k}from"./index.c5d1d7f8.js";import{l as V,P as H,Y as E,D as I}from"./YearPicker.8cee07ab.js";const T=220,A=36,R=n=>n*(180/Math.PI),O=()=>{const n=T,e=A,r=.65,o={x:n/2,y:n/2},t={x:o.x,y:0},l=t.x-o.x,a=t.y-o.y,s=(h,m,f)=>{const c=m-o.x,g=f-o.y,u=Math.atan2(l,a)-Math.atan2(c,g);let b=R(u);b=Math.round(b/h)*h,b%=360;const v=Math.floor(b/h)||0,w=c**2+g**2,N=Math.sqrt(w);return{value:v,distance:N}};return{clockWidth:n,clockHourWidth:e,getHours:(h,m,f=!1)=>{const{value:c,distance:g}=s(30,h,m);let u=c||12;return f?u%=12:g<n/2-e&&(u+=12,u%=24),u},getMinutes:(h,m,f=1)=>{const c=f*6;let{value:g}=s(c,h,m);return g=g*f%60,g},innerScale:r}},W=(n,e)=>n==="hour"?e*30:e*6,F=(n,e)=>n!=="hour"&&e%5!==0?"white":"var(--spark-clock-pointer-color)";function L(n){const{type:e,value:r,children:o,onChange:t}=n,l=k("clock"),{clockWidth:a,clockHourWidth:s,getHours:d,getMinutes:p,innerScale:h}=O(),m=(u,b)=>{const{offsetX:v,offsetY:w}=u,N=e==="hour"?d(v,w,!1):p(v,w);t(N,b)},f=u=>{u.buttons>0&&m(u.nativeEvent,"shallow")},c=u=>{m(u.nativeEvent,"finish")},g=e==="hour"&&(r===0||r>12);return x("div",{className:l.m("wrap"),style:{width:`${a}px`,height:`${a}px`},children:[i("div",{"aria-label":"clock-square-mask",className:l.e("quare-mask"),onMouseMove:f,onMouseUp:c}),i("div",{"aria-label":"pointer",className:l.e("pointer"),style:{opacity:V.exports.isNaN(r)?0:1,height:`${(a-s-2)/2*(g?h:1)}px`,transform:`rotateZ(${W(e,r)}deg)`},children:i("div",{className:l.e("pointer-center"),style:{top:`${-s/2}px`,left:`calc(50% - ${s/2}px)`,border:`${s/2-2}px solid var(--spark-clock-pointer-color)`,background:F(e,r)}})}),i("div",{style:{width:"100%"},children:C.exports.Children.toArray(o).map((u,b)=>C.exports.cloneElement(u,1))})]})}const M=({view:n,views:e,onViewChange:r,onChange:o})=>{var m,f;const[t,l]=C.exports.useState(n||e[0]);C.exports.useEffect(()=>{n&&l(n)},[n]);const a=(m=e[e.indexOf(t)-1])!=null?m:null,s=(f=e[e.indexOf(t)+1])!=null?f:null,d=C.exports.useCallback(c=>{l(c),r&&r(c)},[r]),p=C.exports.useCallback(()=>{s&&d(s)},[s,d]),h=C.exports.useCallback((c,g)=>{const u=g==="finish";o(c,u&&s?"partial":g),u&&p()},[s,p,o]);return{openView:t,setOpenView:d,openNext:p,nextView:s,previousView:a,handleChangeAndOpenNext:h}};function D(n){const{index:e,inner:r,label:o}=n,t=k("clock-number"),{clockWidth:l,clockHourWidth:a,innerScale:s}=O(),d=e%12/12*Math.PI*2-Math.PI/2,p=(l-a-2)/2*(r?s:1),h=Math.round(Math.cos(d)*p),m=Math.round(Math.sin(d)*p);return i("span",{className:`${t.b()} ${t.useIs("inner",r)}`,style:{left:`calc((100% - ${a}px) / 2)`,width:`${a}px`,height:`${a}px`,transform:`translate(
          ${h}px,
          ${m+(l-a)/2}px
        )`},children:o})}const K=()=>{const n=[],o=t=>t===12?"00":`${t*5}`.length===1?`0${t*5}`:`${t*5}`;for(let t=1;t<=12;t+=1)n.push(i(D,{index:t,label:o(t)},t));return n},Y=()=>{const n=[];for(let o=0;o<=23;o+=1){let t=o.toString();o===0&&(t="00"),n.push(i(D,{index:o,label:t,inner:o===0||o>12},o))}return n};function j(n){const{date:e,view:r,views:o=["hour","minute"],onChange:t,onViewChange:l}=n,a=k("clock-picker"),{openView:s,setOpenView:d,previousView:p,nextView:h,handleChangeAndOpenNext:m}=M({view:r,views:o,onChange:t,onViewChange:l}),f=C.exports.useMemo(()=>{switch(s){case"hour":return{onChange:(g,u)=>{m(e.hour(g),u)},value:e.hour(),children:Y()};case"minute":return{onChange:(g,u)=>{m(e.minute(g),u)},value:e.minute(),children:K()};default:throw new Error("not supported view")}},[s,e,m]);return x("div",{className:a.b(),children:[i("div",{className:a.e("label"),children:{hour:"\u5C0F\u65F6",minute:"\u5206\u949F",second:"\u79D2"}[s]}),i(H,{className:a.e("arrow"),isLeftDisabled:!p,isRightDisabled:!h,onLeftClick:()=>d(p),onRightClick:()=>d(h)}),i(L,{type:s,...f})]})}const q=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"];function U(n){const{date:e,openView:r,views:o,onViewChange:t,onMonthChange:l}=n,a=k("pickers-calendar-header");return x("div",{className:a.b(),children:[x("div",{className:a.m("wrapper"),children:[x("div",{className:a.e("text"),children:[i("span",{children:q[e.month()]||""}),i("span",{children:e.year()||""})]}),i("div",{className:`${a.e("icon")} ${a.useIs("year",r==="year")}`,onClick:()=>t(r==="year"?"day":"year"),children:"<"})]}),i(H,{onLeftClick:()=>l(-1),onRightClick:()=>l(1)})]})}function _(n){const{date:e,view:r,views:o,onChange:t,onViewChange:l}=n,a=k("calendar-picker"),{openView:s,setOpenView:d,handleChangeAndOpenNext:p}=M({view:r,views:o,onChange:t,onViewChange:l}),h=c=>{p(e.add(c,"month"))},m=c=>{p(c,"finish")},f=c=>{p(c,"finish")};return x("div",{className:a.m("root"),children:[i(U,{openView:s,views:o,onViewChange:d,date:e,onMonthChange:h}),x("div",{className:a.e("content"),children:[s==="year"&&i(E,{date:e,onChange:m}),s==="day"&&i(I,{date:e,onChange:f})]})]})}function B(n){const{height:e,active:r,children:o}=n,t=k("scroll-number-item");return i("li",{className:t.b(),children:o})}function y(n){const{start:e=0,end:r=23}=n,o=k("scroll-number"),t=40,l=V.exports.times(r-e+1,c=>({number:e+c,label:e+c<10?`0${e+c}`:e+c})),a=t*l.length,s=C.exports.useRef(),[d,p]=C.exports.useState(0),[h,m]=C.exports.useState(0),f=c=>{const{scrollTop:g}=c.target,u=Math.round(g/t);m(()=>u),p(()=>u*t)};return x("div",{className:o.m("wrapper"),children:[i("div",{ref:s,className:o.e("content"),onScroll:f,children:i("div",{style:{height:`${a}px`}})}),i("div",{className:o.m("list--wrapper"),children:i("ul",{className:o.m("list"),style:{top:`${-d}px`},children:l.map(c=>i(B,{height:t,active:c.number===h,children:c.label},c.label))})})]})}function X(n){return x(S,{children:[i(y,{end:23}),i(y,{end:59}),i(y,{end:59})]})}function Z(n){const e=k("digital-clock-picker");return i("div",{className:e.b(),children:i(X,{})})}const $=n=>n==="year"||n==="month"||n==="day",P=n=>n==="hour"||n==="minute",z=C.exports.forwardRef((n,e)=>{const{views:r,date:o,onChange:t,dial:l="clock"}=n,a=k("calendar-or-clock-picker"),{openView:s,setOpenView:d,handleChangeAndOpenNext:p}=M({view:void 0,views:r,onChange:t}),h=C.exports.useMemo(()=>l==="number"?Z:j,[l]);return x("div",{ref:e,"aria-label":"picker-view-root",className:a.b(),children:[P(s)&&i(h,{date:o,view:s,views:r.filter(P),onChange:p,onViewChange:d}),$(s)&&i(_,{date:o,view:s,views:r.filter($),onChange:p,onViewChange:d})]})});z.displayName="CalendarOrClockPicker";const G=C.exports.forwardRef((n,e)=>{const{togglePopper:r,renderInput:o,value:t,inputType:l="date",...a}=n;return o({ref:e,value:t,togglePopper:d=>{d.nativeEvent.stopImmediatePropagation(),r()},...a})});G.displayName="KeyboardDateInput";export{z as C,G as K};
//# sourceMappingURL=KeyboardDateInput.f1b045f5.js.map
